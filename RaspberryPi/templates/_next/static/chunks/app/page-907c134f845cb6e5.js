(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3660:(t,e,i)=>{Promise.resolve().then(i.bind(i,6774))},6774:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u});var o=i(7437),r=i(4088);function s(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function n(){s("/left",{direction:"left"})}function a(){s("/right",{direction:"right"})}function c(){s("/head",{direction:"head"})}function p(){s("/jiggly",{direction:"jiggly"})}let l=!1;async function d(t){let{x:e,y:i}=t;if(!(e&&i)||l)return;l=!0;let o=180/Math.PI*Math.atan2(i,e);await s("/leg",{angle:o}),l=!1}function u(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"bg-gray-200 h-screen w-screen flex items-center font-mono",children:(0,o.jsxs)("div",{className:"bg-gray-300 mx-auto p-5 rounded-full shadow-2xl border text-center",children:[(0,o.jsx)("h1",{className:"inline px-3 text-2xl text-center shadow-inner shadow-gray-400  text-gray-400 rounded-full",children:"PuppiWi Controller"}),(0,o.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,o.jsx)("div",{className:"flex ",children:(0,o.jsx)("div",{className:"border shadow-inner shadow-gray-500 rounded-full w-32 h-32 m-5 flex justify-center items-center ",children:(0,o.jsx)(r.Tj,{size:100,baseColor:"",stickColor:"rgb(156 163 175)",move:d})})}),(0,o.jsxs)("div",{className:"flex ",children:[(0,o.jsx)("div",{className:"flex flex-col justify-center",children:(0,o.jsx)("button",{onClick:n,className:"m-1 bg-green-500 w-20 h-20 text-2xl rounded-full text-gray-300 shadow-lg shadow-gray-400",children:"L"})}),(0,o.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,o.jsx)("button",{onClick:c,className:"m-1 bg-blue-500 w-20 h-20 text-2xl rounded-full text-gray-300 shadow-lg shadow-gray-400",children:"H"}),(0,o.jsx)("button",{onClick:p,className:"m-1 bg-yellow-500 w-20 h-20 text-2xl rounded-full text-gray-300 shadow-lg shadow-gray-400",children:"N"})]}),(0,o.jsx)("div",{className:"flex flex-col justify-center",children:(0,o.jsx)("button",{onClick:a,className:"m-1 bg-red-500 w-20 h-20 text-2xl rounded-full text-gray-300 shadow-lg shadow-gray-400",children:"R"})})]})]})]})})})}},6065:function(t,e,i){"use strict";var o,r,s,n,a,c=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=this&&this.__assign||function(){return(p=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Joystick=void 0;var l=i(2265),d=i(9194),u=i(4936),h=i(4656);(o=n||(n={})).PointerDown="pointerdown",o.PointerMove="pointermove",o.PointerUp="pointerup",(r=a||(a={}))[r.TopRight=2.35619449]="TopRight",r[r.TopLeft=-2.35619449]="TopLeft",r[r.BottomRight=.785398163]="BottomRight",r[r.BottomLeft=-.785398163]="BottomLeft";var f=function(t){function e(e){var i,o=t.call(this,e)||this;return o._stickRef=l.createRef(),o._baseRef=l.createRef(),o.frameId=null,o._pointerId=null,o._mounted=!1,o._pointerMove=function(t){if(t.preventDefault(),o.state.dragging&&(o.props.followCursor||t.pointerId===o._pointerId)){var e=t.clientX,i=t.clientY,r=e-o._parentRect.left-o._radius,s=i-o._parentRect.top-o._radius,n=o._distance(r,s),a=(0,h.shapeBoundsFactory)(o.props.controlPlaneShape||o.props.baseShape,e,i,r,s,n,o._radius,o._baseSize,o._parentRect),c=Math.atan2(r=a.relativeX,s=a.relativeY);o._updatePos({relativeX:r,relativeY:s,distance:o._distanceToPercentile(n),direction:o._getDirection(c),axisX:e-o._parentRect.left,axisY:i-o._parentRect.top})}},o._pointerUp=function(t){if(t.pointerId===o._pointerId){var e={dragging:!1};o.props.sticky||(e.coordinates=void 0),o.frameId=window.requestAnimationFrame(function(){o._mounted&&o.setState(e)}),window.removeEventListener(n.PointerUp,o._pointerUp),window.removeEventListener(n.PointerMove,o._pointerMove),o._pointerId=null,o.props.stop&&o.props.stop({type:"stop",x:o.props.sticky?2*o.state.coordinates.relativeX/o._baseSize:null,y:o.props.sticky?2*o.state.coordinates.relativeY/o._baseSize:null,direction:o.props.sticky?o.state.coordinates.direction:null,distance:o.props.sticky?o.state.coordinates.distance:null})}},o.state={dragging:!1},o._throttleMoveCallback=(i=0,function(t){var e=new Date().getTime(),r=o.props.throttle||0;if(!(e-i<r)&&(i=e,o.props.move))return o.props.move(t)}),o}return c(e,t),e.prototype.componentWillUnmount=function(){var t=this;this._mounted=!1,this.props.followCursor&&window.removeEventListener(n.PointerMove,function(e){return t._pointerMove(e)}),null!==this.frameId&&window.cancelAnimationFrame(this.frameId)},e.prototype.componentDidMount=function(){var t=this;this._mounted=!0,this.props.followCursor&&(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(n.PointerMove,function(e){return t._pointerMove(e)}),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},e.prototype._updatePos=function(t){var e=this;this.frameId=window.requestAnimationFrame(function(){e._mounted&&e.setState({coordinates:t})}),"number"==typeof this.props.minDistance&&t.distance<this.props.minDistance||this._throttleMoveCallback({type:"move",x:2*t.relativeX/this._baseSize,y:-(2*t.relativeY/this._baseSize),direction:t.direction,distance:t.distance})},e.prototype._pointerDown=function(t){this.props.disabled||this.props.followCursor||(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(n.PointerUp,this._pointerUp),window.addEventListener(n.PointerMove,this._pointerMove),this._pointerId=t.pointerId,this._stickRef.current.setPointerCapture(t.pointerId),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},e.prototype._getDirection=function(t){return t>a.TopRight||t<a.TopLeft?"FORWARD":t<a.TopRight&&t>a.BottomRight?"RIGHT":t<a.BottomLeft?"LEFT":"BACKWARD"},e.prototype._distance=function(t,e){return Math.hypot(t,e)},e.prototype._distanceToPercentile=function(t){var e=t/(this._baseSize/2)*100;return e>100?100:e},e.prototype.getBaseShapeStyle=function(){var t=this.props.baseShape||d.JoystickShape.Circle;return(0,u.shapeFactory)(t,this._baseSize)},e.prototype.getStickShapeStyle=function(){var t=this.props.stickShape||d.JoystickShape.Circle;return(0,u.shapeFactory)(t,this._baseSize)},e.prototype._getBaseStyle=function(){var t=void 0!==this.props.baseColor?this.props.baseColor:"#000033",e="".concat(this._baseSize,"px"),i=p(p({},this.getBaseShapeStyle()),{height:e,width:e,background:t,display:"flex",justifyContent:"center",alignItems:"center"});return this.props.baseImage&&(i.background="url(".concat(this.props.baseImage,")"),i.backgroundSize="100%"),i},e.prototype._getStickStyle=function(){var t=void 0!==this.props.stickColor?this.props.stickColor:"#3D59AB",e=this._stickSize?"".concat(this._stickSize,"px"):"".concat(this._baseSize/1.5,"px"),i=p(p({},this.getStickShapeStyle()),{background:t,cursor:"move",height:e,width:e,border:"none",flexShrink:0,touchAction:"none"});return this.props.stickImage&&(i.background="url(".concat(this.props.stickImage,")"),i.backgroundSize="100%"),this.props.pos&&(i=Object.assign({},i,{position:"absolute",transform:"translate3d(".concat(this.props.pos.x*this._baseSize/2,"px, ").concat(-(this.props.pos.y*this._baseSize)/2,"px, 0)")})),void 0!==this.state.coordinates&&(i=Object.assign({},i,{position:"absolute",transform:"translate3d(".concat(this.state.coordinates.relativeX,"px, ").concat(this.state.coordinates.relativeY,"px, 0)")})),i},e.prototype.render=function(){var t=this;this._baseSize=this.props.size||100,this._stickSize=this.props.stickSize,this._radius=this._baseSize/2;var e=this._getBaseStyle(),i=this._getStickStyle();return l.createElement("div",{"data-testid":"joystick-base",className:this.props.disabled?"joystick-base-disabled":"",ref:this._baseRef,style:e},l.createElement("button",{ref:this._stickRef,disabled:this.props.disabled,onPointerDown:function(e){return t._pointerDown(e)},className:this.props.disabled?"joystick-disabled":"",style:i}))},e}(l.Component);e.Joystick=f},9194:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JoystickShape=void 0,function(t){t.Circle="circle",t.Square="square",t.AxisY="axisY",t.AxisX="axisX"}(e.JoystickShape||(e.JoystickShape={}))},4088:(t,e,i)=>{"use strict";e.Tj=void 0;var o=i(6065);Object.defineProperty(e,"Tj",{enumerable:!0,get:function(){return o.Joystick}}),i(9194)},4656:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shapeBoundsFactory=void 0;var o=i(9194);e.shapeBoundsFactory=function(t,e,i,s,n,a,c,p,l){switch(t){case o.JoystickShape.Square:return{relativeX:s=r(e-l.left-p/2,p),relativeY:n=r(i-l.top-p/2,p)};case o.JoystickShape.AxisX:return{relativeX:s=r(e-l.left-p/2,p),relativeY:n=0};case o.JoystickShape.AxisY:return{relativeX:s=0,relativeY:n=r(i-l.top-p/2,p)};default:return a>c&&(s*=c/a,n*=c/a),{relativeX:s,relativeY:n}}};var r=function(t,e){var i=e/2;return t>i?i:t<-i?-1*i:t}},4936:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shapeFactory=void 0;var o=i(9194);e.shapeFactory=function(t,e){switch(t){case o.JoystickShape.Square:return{borderRadius:Math.sqrt(e)};case o.JoystickShape.Circle:default:return{borderRadius:e}}}}},t=>{var e=e=>t(t.s=e);t.O(0,[130,215,744],()=>e(3660)),_N_E=t.O()}]);